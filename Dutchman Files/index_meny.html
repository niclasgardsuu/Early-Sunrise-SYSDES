<!DOCTYPE html> 
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>The Flying Dutchman</title>
    <script type="text/javascript" src="jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="./css/menu.css">
    <script type="text/javascript" src="Beverages.js"></script>
    <script type="text/javascript" src="BeerDB.js"></script>
    <script type="text/javascript" src="DBLoaded.js"></script>
    <script type="text/javascript" src="loader.js"></script>
    <script>

        function getFilter(category) {
            var filter = [];
            console.log(drunk[category]);
            for (var i = 0; i < drunk[category].length; i++) {
                if (!filter.includes(drunk[category][i].varugrupp)) {
                    filter.push(drunk[category][i].varugrupp);
                }
            }
            return filter;
        }

        function createFilter(category) {

            var menu = document.getElementById("product-window");
            menu.appendChild(createBeverageContainer("LMAO","4.20","./img/beer.svg"));

            var filter = getFilter(category);
            var id = document.getElementById("filter-window");
            id.textContent = "";
            for(var i = 0; i < filter.length; i++) {
                var span1 = document.createElement("span");
                var input = document.createElement("input");
                input.setAttribute("type","checkbox");
                input.className = "filter-checkbox";
                input.id = filter[i];
                span1.appendChild(input)
                var span2 = document.createElement("span");
                span2.appendChild(document.createTextNode(filter[i]));
                var label = document.createElement("label");
                label.setAttribute("for",filter[i]);
                label.className = "filter-label";
                label.appendChild(span1);
                label.appendChild(span2);
                var container = document.createElement("div");
                container.className = "filter-container";
                container.appendChild(label);
                id.appendChild(container);
            }
        }

        function createBeverageContainer(name, price, imgSrc) {
            /*
            <div class="product-container-top">
                <div class="product-container-top-top">
                    <span class="product-name">Norrlands Guld</span>
                </div>
                <div class="product-container-top-bottom">
                    <img src="./img/beer.svg" alt="">
                </div>
            </div>
            */

            var productName = document.createElement("span");
            var productContainerTopTop = document.createElement("div");
            productName.className = "product-name";
            productContainerTopTop.className = "product-container-top-top";
            productName.appendChild(document.createTextNode(name));
            productContainerTopTop.appendChild(productName);

            var img = document.createElement("img");
            img.setAttribute("src",imgSrc);
            var productContainerTopBottom = document.createElement("div");
            productContainerTopBottom.className = "product-container-top-bottom";
            productContainerTopBottom.appendChild(img);

            var productContainerTop = document.createElement("div");
            productContainerTop.className = "product-container-top";
            productContainerTop.appendChild(productContainerTopTop);
            productContainerTop.appendChild(productContainerTopBottom);


            /*
            <div class="product-container-bottom">
                <div class="product-container-bottom-left">
                    <span class="product-price">
                        7:90
                    </span>
                </div>
                <div class="product-container-bottom-right">
                    <button class="product-buy">Köp</button>
                </div>
            </div>
            */

            var productBuy = document.createElement("button");
            productBuy.className = "product-buy";
            productBuy.appendChild(document.createTextNode("Köp"));

            var productPrice = document.createElement("span");
            productPrice.appendChild(document.createTextNode(price+" kr"));
            
            var productContainerBottomLeft = document.createElement("div");
            var productContainerBottomRight = document.createElement("div");
            productContainerBottomLeft.className = "product-container-bottom-left";
            productContainerBottomLeft.appendChild(productPrice);
            productContainerBottomRight.className = "product-container-bottom-right";
            productContainerBottomRight.appendChild(productBuy);

            var productContainerBottom = document.createElement("div");
            productContainerBottom.className = "product-container-bottom";
            productContainerBottom.appendChild(productContainerBottomLeft);
            productContainerBottom.appendChild(productContainerBottomRight);

            var productContainer = document.createElement("div");
            productContainer.className = "product-container";
            productContainer.appendChild(productContainerTop);
            productContainer.appendChild(productContainerBottom);

            return productContainer;
        } 

        function createBeverages() {

        }

        function createMainCategory() {
            dict = {
                "mainCategory": ["beer","spirits","wine","non-alcoholic"],

                "sv": {
                    "beer":"öl",
                    "spirits":"sprit",
                    "wine":"vin",
                    "non-alcoholic":"alkoholfritt"
                },
                "en": {
                    "beer": "beer",
                    "spirits": "spirits",
                    "wine": "wine",
                    "non-alcoholic":"non-alcoholic"
                }
            };

            
            var id = document.getElementById("main-category");
            for (var i = 0; i < dict.mainCategory.length; i++) {
                //Namn på kategorin
                var name = document.createElement("span");
                name.appendChild(document.createTextNode(dict.mainCategory[i]));
                //Bild på kategorin
                var img = document.createElement("img");
                img.src = "./img/beer.svg";
                img.className = "main-category-img";

                //länk för kategorin
                var a = document.createElement("a");
                a.className = "main-category-box";
                a.appendChild(img);
                a.appendChild(name);
                //måste använda bind för att få med argumentet i funktionen
                a.addEventListener("click", createFilter.bind(null, dict.mainCategory[i]));
                id.appendChild(a);
            }
        }

        function update_view_menu() {
            createMainCategory();
        }

        function createProducts() {

        }

        $(document).ready(function(){
            update_view_menu();
            console.log(drunk.beer.length);
        });

    </script>
</head>

<body>


    <!--The menu of the website-->
    <div id="menu-window">
        <div id="main-category">
        </div>
        <div id="sub-category">

        </div>
    </div>



    <!--The main content of the website-->
    <div class="main-window">
        <!--The filter view-->
        <div id="filter-window">
        </div>


        <!--The product view-->
        <div id="product-window">
        </div>

        <div id="shopping-cart-window">
        </div>
    </div>


    <!--The footnote of the webiste-->
    <div class="footnote-window">
        <h4>The Flying Dutchman by © 2021 The Early Sunrise</h4>
    </div>

</body>

</html>

